---
import { SEO, type Props as SEOProps } from "astro-seo";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "@/styles/global.css";
import Posthog from "@/components/Posthog.astro";

interface Props {
  seo?: SEOProps;
  ogImage?: {
    template: string;
    data?: Record<string, any>;
  };
}

const { seo, ogImage } = Astro.props;

const ogImageUrl = "/og_image.png";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Trading-focused dark mode only - no theme switching needed -->

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="generator" content={Astro.generator} />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta
      name="keywords"
      content="josé donato, fullstack, openbb, quant, trading, tools, finance"
    />
    <Posthog />
    <SEO
      {...seo}
      title={seo?.title ?? "José Donato"}
      description={seo?.description ??
        "Fullstack Engineer from Portugal specializing in finance and quant trading tools. Working remotely at OpenBB."}
      openGraph={{
        basic: {
          type: "website",
          title: seo?.title ?? "José Donato",
          image: ogImageUrl,
          url: seo?.canonical,
        },
      }}
      twitter={{
        card: "summary_large_image",
        image: ogImageUrl,
      }}
    />
  </head>
  <body>
    <div class="fixed inset-0 h-screen w-full -z-10">
      <svg
        class="absolute inset-0 h-full w-full"
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
      >
        <defs>
          <pattern
            id="grid-pattern"
            width="24"
            height="24"
            patternUnits="userSpaceOnUse"
          >
            <path
              d="M 24 0 L 0 0 0 24"
              fill="none"
              stroke="#374151"
              stroke-width="0.5"
              opacity="0.3"></path>
          </pattern>
          <radialGradient id="grid-fade" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="black" stop-opacity="0"></stop>
            <stop offset="60%" stop-color="black" stop-opacity="0"></stop>
            <stop offset="100%" stop-color="black" stop-opacity="0.8"></stop>
          </radialGradient>
        </defs>
        <rect width="100%" height="100%" fill="url(#grid-pattern)"></rect>
        <rect width="100%" height="100%" fill="url(#grid-fade)"></rect>
      </svg>
    </div>
    <main
      class="mx-auto max-w-(--breakpoint-md) px-4 sm:px-6 md:px-8 my-12 md:my-20"
    >
      <Header />
      <div class="min-h-[40vh]">
        <slot />
      </div>
      <Footer />
    </main>
  </body>
</html>
