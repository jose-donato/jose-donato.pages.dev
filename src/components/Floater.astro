---
const pathname = new URL(Astro.request.url).pathname;

const LINKS = [
  { name: "Home", href: "/", icon: "material-symbols-home" },
  {
    name: "Projects",
    href: "/projects",
    icon: "material-symbols-work",
  },
  {
    name: "Blog",
    href: "/blog",
    icon: "material-symbols-article",
  },
];

// Check if the current path starts with a specific route
const isActive = (href: string) => {
  if (href === "/") {
    return pathname === href;
  }
  if (href === "/projects") {
    return (
      pathname === href ||
      pathname.startsWith(`${href}/`) ||
      pathname.startsWith("/tools")
    );
  }
  return pathname === href || pathname.startsWith(`${href}/`);
};
---

<div class="flex justify-center items-center mb-8 md:mb-12 px-4">
  <nav
    class="flex transition-all ease-in-out gap-2 bg-bg-secondary/50 backdrop-blur-sm px-2 py-2 border border-border-primary/50 rounded-lg overflow-x-auto"
  >
    {
      LINKS.map((link) => (
        <a
          href={link.href}
          class:list={[
            "text-xs sm:text-sm md:text-base font-semibold uppercase tracking-wide transition-all duration-300 px-6 py-3 relative overflow-hidden whitespace-nowrap rounded-md",
            {
              "text-text-primary bg-bullish-600/20 shadow-lg": isActive(
                link.href,
              ),
              "text-text-muted hover:text-text-secondary hover:bg-bg-tertiary/50":
                !isActive(link.href),
            },
          ]}
          title={link.name}
        >
          {link.name}
        </a>
      ))
    }
  </nav>
</div>
