---
const pathname = new URL(Astro.request.url).pathname;

const LINKS = [
  { name: "Home", href: "/", icon: "material-symbols-home" },
  {
    name: "Projects",
    href: "/projects",
    icon: "material-symbols-playlist-add-check",
  },
  {
    name: "Tools",
    href: "/tools",
    icon: "material-symbols-build",
  },
  {
    name: "Blog",
    href: "/blog",
    icon: "material-symbols-article",
  },
];

// Check if the current path starts with a specific route
const isActive = (href: string) => {
  if (href === "/") {
    return pathname === href;
  }
  return pathname === href || pathname.startsWith(`${href}/`);
};
---

<div class="flex justify-center items-center mb-12">
  <nav
    class="flex transition-all ease-in-out gap-2 bg-bg-secondary/50 backdrop-blur-sm px-2 py-2 border border-border-primary/50"
  >
    {
      LINKS.map((link) => (
        <a
          href={link.href}
          class:list={[
            "text-base font-semibold uppercase tracking-wide transition-all duration-300 px-6 py-3  relative overflow-hidden",
            {
              "text-text-primary bg-bullish-600/20 shadow-lg": isActive(
                link.href,
              ),
              "text-text-muted hover:text-text-secondary hover:bg-bg-tertiary/50":
                !isActive(link.href),
              "underline-animation": isActive(link.href),
            },
          ]}
          title={link.name}
        >
          {link.name}
        </a>
      ))
    }
  </nav>
</div>

<style>
  .underline-animation {
    position: relative;
    padding-bottom: 6px;
  }

  .underline-animation::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--bullish-500);
    transform: scaleX(1);
    transform-origin: left;
    transition: all 0.3s ease;
    animation: animateUnderline 0.6s ease-out;
  }

  .underline-animation:hover::after {
    background: var(--bullish-400);
    height: 4px;
  }

  @keyframes animateUnderline {
    0% {
      transform: scaleX(0);
      opacity: 0;
    }
    100% {
      transform: scaleX(1);
      opacity: 1;
    }
  }
</style>
